import{S as k,i as E,s as S,k as p,a as P,l as d,m as _,h,c as w,n as f,b as C,G as c,I as b,J as I,K as D,B as L,L as F}from"../../../chunks/index-b7867e78.js";import{a as N}from"../../../chunks/supabaseClient-63289d63.js";function O(o){let a,l,e,r,u,t,s,m,v;return{c(){a=p("form"),l=p("div"),e=p("input"),r=P(),u=p("div"),t=p("input"),this.h()},l(n){a=d(n,"FORM",{});var i=_(a);l=d(i,"DIV",{});var g=_(l);e=d(g,"INPUT",{class:!0,type:!0,placeholder:!0}),g.forEach(h),r=w(i),u=d(i,"DIV",{});var y=_(u);t=d(y,"INPUT",{type:!0,class:!0}),y.forEach(h),i.forEach(h),this.h()},h(){f(e,"class","inputField"),f(e,"type","email"),f(e,"placeholder","Your email"),f(t,"type","submit"),f(t,"class","button mt-sm"),t.value=s=o[0]?"Loading":"Send Login link",t.disabled=o[0]},m(n,i){C(n,a,i),c(a,l),c(l,e),b(e,o[1]),c(a,r),c(a,u),c(u,t),m||(v=[I(e,"input",o[3]),I(a,"submit",D(o[2]))],m=!0)},p(n,[i]){i&2&&e.value!==n[1]&&b(e,n[1]),i&1&&s!==(s=n[0]?"Loading":"Send Login link")&&(t.value=s),i&1&&(t.disabled=n[0])},i:L,o:L,d(n){n&&h(a),m=!1,F(v)}}}function T(o,a,l){let e=!1,r="";const u=async()=>{try{l(0,e=!0);const{error:s}=await N.auth.signInWithOtp({email:r});if(s)throw s;alert("Check your email for the login link!")}catch(s){s instanceof Error&&alert(s.message)}finally{l(0,e=!1)}};function t(){r=this.value,l(1,r)}return[e,r,u,t]}class q extends k{constructor(a){super(),E(this,a,T,O,S,{})}}export{q as default};
